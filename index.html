<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cute Music Player</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Comic Neue', cursive; }

/* ===== GLASS CARD ===== */
.glass {
  background: rgba(255,255,255,.65);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border: 1px solid rgba(255,255,255,.4);
}

/* ===== ALBUM ===== */
.album {
  width: 140px;
  height: 140px;
  border-radius: 24px;
  margin: auto;
  box-shadow: 0 15px 35px rgba(236,72,153,.45);
}
.spin { animation: spin 6s linear infinite }
@keyframes spin { to { transform: rotate(360deg); } }

/* ===== CONTROLS ===== */
.controls {
  display:flex;
  justify-content:center;
  gap:14px;
  margin-top:18px;
}

.btn {
  width:56px;
  height:56px;
  border-radius:999px;
  position:relative;
  border:none;
  backdrop-filter:blur(12px);
  box-shadow:
    0 10px 20px rgba(0,0,0,.18),
    inset 0 0 0 1px rgba(255,255,255,.45);
  transition:transform .15s ease;
}
.btn:active { transform:scale(.9); }

.btn::after {
  content:'';
  position:absolute;
  inset:18px;
  background:white;
  -webkit-mask-size:contain;
  -webkit-mask-repeat:no-repeat;
  -webkit-mask-position:center;
  mask-size:contain;
  mask-repeat:no-repeat;
  mask-position:center;
}

.shuffle { background:rgba(16,185,129,.45); }
.prev    { background:rgba(139,92,246,.45); }
.play    { background:rgba(236,72,153,.55); box-shadow:0 0 30px rgba(236,72,153,.6); }
.next    { background:rgba(59,130,246,.45); }
.repeat  { background:rgba(249,115,22,.45); }

.shuffle::after {
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3h4v4l-1.41-1.41-4.83 4.83-1.42-1.42 4.83-4.83L17 3zM3 7h4l3 3-1.41 1.41L6.59 9H3V7zm0 10v-2h3.59l2.17-2.17 1.41 1.41L7 17H3zm18-4v4h-4l1.41-1.41-4.83-4.83 1.42-1.42 4.83 4.83L21 13z"/></svg>');
  mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3h4v4l-1.41-1.41-4.83 4.83-1.42-1.42 4.83-4.83L17 3zM3 7h4l3 3-1.41 1.41L6.59 9H3V7zm0 10v-2h3.59l2.17-2.17 1.41 1.41L7 17H3zm18-4v4h-4l1.41-1.41-4.83-4.83 1.42-1.42 4.83 4.83L21 13z"/></svg>');
}

.prev::after {
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6L18 6v12z"/></svg>');
  mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6L18 6v12z"/></svg>');
}

.play::after {
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>');
  mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>');
}

.next::after {
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 6h2v12h-2zM6 6l8.5 6L6 18z"/></svg>');
  mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 6h2v12h-2zM6 6l8.5 6L6 18z"/></svg>');
}

.repeat::after {
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 1l4 4-4 4V6H7v4l-4-4 4-4v3h10V1zM7 23l-4-4 4-4v3h10v-4l4 4-4 4v-3H7v3z"/></svg>');
  mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 1l4 4-4 4V6H7v4l-4-4 4-4v3h10V1zM7 23l-4-4 4-4v3h10v-4l4 4-4 4v-3H7v3z"/></svg>');
}

.range {
  appearance:none;
  width:100%;
  height:8px;
  border-radius:999px;
  background:linear-gradient(to right,#ec4899,#8b5cf6);
}
.range::-webkit-slider-thumb {
  appearance:none;
  width:22px;
  height:22px;
  border-radius:50%;
  background:white;
  box-shadow:0 4px 10px rgba(0,0,0,.3);
}
/* ===== PLAYLIST ===== */
.playlist-item {
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  border-radius:14px;
  cursor:pointer;
  background:rgba(255,255,255,.6);
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  transition:.2s ease;
}

.playlist-item:hover {
  background:rgba(236,72,153,.25);
}

.playlist-item.active {
  background:linear-gradient(to right,#ec4899,#8b5cf6);
  color:white;
  box-shadow:0 6px 18px rgba(236,72,153,.45);
}

.playlist-art {
  width:38px;
  height:38px;
  border-radius:10px;
  object-fit:cover;
}

.playlist-title {
  font-weight:bold;
  font-size:13px;
}

.playlist-artist {
  font-size:11px;
  opacity:.8;
}

</style>
</head>

<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200 p-4">

<div class="max-w-sm w-full p-1 rounded-[2.5rem] bg-gradient-to-br from-pink-300 via-purple-300 to-blue-300 shadow-2xl">
<div class="glass rounded-[2.2rem] p-6 text-center">

<h1 id="title" class="text-xl font-bold text-purple-600">Cute Music Player</h1>
<p id="artist"
   class="mb-4 inline-block px-4 py-1 rounded-full
          bg-gradient-to-r from-pink-300 to-purple-300
          text-white text-sm font-bold
          shadow-md tracking-wide">
  Ray
</p>

<img id="album" class="album mb-4">

<input id="progress" type="range" value="0" class="range">

<div class="flex justify-between mt-2 font-bold text-sm">
  <span id="current">0:00</span>
  <span id="duration">0:00</span>
</div>

<div class="controls">
  <button class="btn shuffle"></button>
  <button class="btn prev"></button>
  <button class="btn play" id="play"></button>
  <button class="btn next"></button>
  <button class="btn repeat"></button>
</div>

<div class="mt-4">
  <p class="font-bold mb-1">Volume</p>
  <input id="volume" type="range" min="0" max="1" step="0.1" value="0.5" class="range">
</div>
<!-- PLAYLIST -->
<div class="mt-5 text-left">
  <p class="font-bold text-purple-600 mb-2 text-sm">Playlist</p>
  <ul id="playlist" class="space-y-2"></ul>
</div>

<!-- PLAYLIST (BARU, TIDAK MERUSAK) -->
<div class="mt-4 text-left">
  <p class="font-bold mb-2 text-center">Playlist</p>
  <ul id="playlist" class="space-y-2"></ul>
</div>

<audio id="audio"></audio>

</div>
</div>

<script>


function renderPlaylist() {
  playlistEl.innerHTML = "";
  playlist.forEach((song, i) => {
    const li = document.createElement("li");
    li.className = "playlist-item" + (i === index ? " active" : "");
    li.innerHTML = `
      <img src="${song.art}" class="playlist-art">
      <div>
        <div class="playlist-title">${song.title}</div>
        <div class="playlist-artist">${song.artist}</div>
      </div>
    `;
    li.onclick = () => {
      index = i;
      loadSong(index);
      playSong();
      renderPlaylist();
    };
    playlistEl.appendChild(li);
  });
}

const playlist = [
  { title:"Batu Menangis", artist:"Ray", src:"music/BatuMenangis.mp3", art:"cutemusisolayer.jpg" }, 
  { title:"Kerudung Merah", artist:"Ray", src:"music/KerudungMerah.mp3", art:"cutemusisolayer.jpg" },
  { title:"Pengembara Biri-biri", artist:"Ray", src:"music/Pengembarabiribiri.mp3", art:"cutemusisolayer.jpg" },
  { title:"Rusa dan Tanduk Barunya", artist:"Ray", src:"music/RusadanTandukBarunya", art:"cutemusisolayer.jpg" },
  { title:"Tiga Babi Kecil", artist:"Ray", src:"music/Tigababikecil.mp3", art:"cutemusisolayer.jpg" },
  { title:"Angsa Dan Telur Emas", artist:"Ray", src:"music/AngsadanTelurEmas.mp3", art:"cutemusisolayer.jpg" }
];

let index = 0;
let isRepeat = false;

const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const album = document.getElementById("album");
const title = document.getElementById("title");
const artist = document.getElementById("artist");
const progress = document.getElementById("progress");
const volume = document.getElementById("volume");
const current = document.getElementById("current");
const duration = document.getElementById("duration");
const playlistEl = document.getElementById("playlist");

const btnPrev = document.querySelector(".prev");
const btnNext = document.querySelector(".next");
const btnShuffle = document.querySelector(".shuffle");
const btnRepeat = document.querySelector(".repeat");

function loadSong(i){
  const s = playlist[i];
  audio.src = s.src;
  title.textContent = s.title;
  artist.textContent = s.artist;
  album.src = s.art;
  renderPlaylist();
}

function playSong(){
  audio.play();
  album.classList.add("spin");
}

function pauseSong(){
  audio.pause();
  album.classList.remove("spin");
}

playBtn.onclick = () => audio.paused ? playSong() : pauseSong();

btnNext.onclick = () => {
  index = (index + 1) % playlist.length;
  loadSong(index);
  playSong();
};

btnPrev.onclick = () => {
  index = (index - 1 + playlist.length) % playlist.length;
  loadSong(index);
  playSong();
};

btnShuffle.onclick = () => {
  let rand;
  do { rand = Math.floor(Math.random() * playlist.length); }
  while (rand === index);
  index = rand;
  loadSong(index);
  playSong();
};

btnRepeat.onclick = () => {
  isRepeat = !isRepeat;
  btnRepeat.style.opacity = isRepeat ? "1" : "0.5";
};

audio.onended = () => isRepeat ? playSong() : btnNext.onclick();

audio.ontimeupdate = () => {
  progress.max = audio.duration || 0;
  progress.value = audio.currentTime || 0;
  current.textContent = format(audio.currentTime);
  duration.textContent = format(audio.duration);
};

progress.oninput = () => audio.currentTime = progress.value;
volume.oninput = () => audio.volume = volume.value;

function format(t){
  if(isNaN(t)) return "0:00";
  return Math.floor(t/60)+":"+String(Math.floor(t%60)).padStart(2,"0");
}

/* PLAYLIST RENDER */
function renderPlaylist(){
  playlistEl.innerHTML = "";
  playlist.forEach((s,i)=>{
    const li = document.createElement("li");
    li.className =
      "p-3 rounded-xl cursor-pointer transition text-sm " +
      (i===index
        ? "bg-pink-300/70 font-bold"
        : "bg-white/50 hover:bg-pink-200/60");
    li.innerHTML = `<div>${s.title}</div><div class="text-xs text-gray-600">${s.artist}</div>`;
    li.onclick = ()=>{
      index = i;
      loadSong(index);
      playSong();
    };
    playlistEl.appendChild(li);
  });
}

loadSong(index);
renderPlaylist();
audio.volume = volume.value;
</script>

</body>
</html>
